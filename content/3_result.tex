\chapter{Conclusions after the development}

\section{Accomplishments}
Over the period of the it project, participation in a number of areas of development were performed:

\begin{itemize}
	\item Improving Code quality for example refactoring.
	\item Documentation.
	\item Writing unit tests and integration tests.
	\item Bug fixes.
	\item Implementation of features.
\end{itemize}

It was possible to get the code quality to a point where no warnings or complication errors occurred.
The all pull requests described in the section \ref{accomplishment_code_quality} contributed to this success.

Contribution in regard of documentation was another portion of development, listed in \ref{accomblishment_docs}.
This not involved the markdown files at the project root and the comments within the source code but also the part of the ion manual.
This will hopefully server future contributors well.

Ion Shell as any other software contains bugs of course. Some the bugs could be fixed via code contribution on my side, listed in \ref{accomplishment_bug_fixes}.
A few features were also achieved, listed in \ref{accomplishment_features}.

The integration tests of Ion Shell were analyzed and comprehended. On one hand this knowledge could be leveraged to create effective tests
which verify the correct behaviour of the implemented features and bug fixes.
On the other hand this understanding lead to a section about how to write the integration tests in Ion Shell \cite{pr_docs_how_to_integration_test}.

\section{Status of Ion Shell}

Ion Shell is not only capable of running on redox os but also quit well on a Linux distribution.
This fact became more than clear by the my conducted development of Ion Shell on a Linux distribution.

The scripting API of Ion Shell allows for writing more correct automation compared to shells like bash shell.
Structural typing and various higher level language features like expansion \ref{ion_shell_lang_expansion} methods \ref{ion_shell_lang_methods} and control flow \ref{ion_shell_lang_control_flow}.

\subsection{Problems with Ion Shell}

However Ion Shell has unfortunately several troublesome areas.
This section points out those aspects of Ion Shell which should be improved on.

\newcommand{\itemIonShellRegularContributor}{\textbf{Ion Shell has no regular contributors}}
\newcommand{\itemIonShellCI}{\textbf{}
	\textbf{Ion Shell has not mainted dependencies}
}
\newcommand{\itemIonShellDistribution}{
	\textbf{Ion Shell has no distribution for end user on Linux}
}
\newcommand{\itemIonShellDependencies}{\textbf{Ion Shell CI is not functioning correctly}}

\begin{itemize}
	\item \itemIonShellRegularContributor
	\item \itemIonShellDependencies
	\item \itemIonShellDistribution
	\item \itemIonShellCI
\end{itemize}


\itemIonShellRegularContributor

The Gitlab repository of Ion Shell does not indicate an active development community
from the beginning of the it project up to the moment of writing.
The last commit before my first contribution was .. .
Up to the moment of writing most commits were done by me.
A few exceptions were occasional pull requests ...
Throughout the it-project there was only one person who reviewed and accepted pull requests.
This individual in question is , , the .. .
The lack of regular contribute could lead to a complete hall of the development of Ion Shell.

\itemIonShellDependencies

A number of dependencies used by Ion Shell are not maintained anymore ...
If newly needed features or bugs arise from those libraries, then someone has to do it on their own.
This puts more complexity on the new potential contributors as they might have to learn and adjust separate code bases.

\itemIonShellDistribution

Ion Shell can be still considered an alpha program.
During the development phase of it project I discovered pretty fast new bugs and needed features.
With a larger user space these issues could be detected early.
More users could provide more feedback to the program and even attract potential contributor.
Additional contributors is what this project really needs the most.
Ion Shell can be complied and run on Linux.
However it lacks official distribution channels for linux end user .
A user indenting to use this shell, has to install the rust tool chain before and then compile the program.
More Linux use rend users could be reached the program would be released on distribution channels like dnf, apt etc .. .

\itemIonShellCI

Not all jobs of the Ion Shell CI' do still not complete successfully.
While the jobs .. now run successfully due to my contribution
The other jobs .., still fail.
This is problematic. While local compilation and manually run test suit can provide detection of problems, it not enforced.
Every pull requests therefore require also inspection of the compilation and a working test suit for the code reviewer.
This could be automated with a proper CI.
Beside causing more work for the reviewer, it also can hinder the confidence of new contributors not knowing that CI can run successfully right now.
I tried communicating this problem via following issues .. .
In addition I talked to the community about this on the matrix server on several occasions.


\section{What is left to do in Ion Shell}

This section describes which goals for the it project could not be archived.
The description also contains the reasons why a goal could be accomplished.

\begin{itemize}
	\item Incorporate the source location, (file name, line number, column number) into the error message.
	\item Implement wild card expansion for various schemes like disk ..
	\item Make the CI work on all jobs possible.
\end{itemize}

The following bullet points were non-goals during the it-project. Nonetheless they were identified as worthwhile endeavours.

\begin{itemize}
	\item Provide various deploy set ups to publish Ion Shell on various package managers like apt, dnf, ..
	\item Port Ion Shell to windows.
\end{itemize}

\subsection{Enriching error messages}

One area of contribution was focused on enriching error message in Ion Shell.
Error messages in Ion Shell already provide specific information about what problem occured.
However the details within certain error messages had some potential for improvement.
The following merged pull requests of mine were focused on that areas:

\begin{itemize}
	\item Out of bounds errors show the invalid index and the length of an array \cite{pr_error_message_shows_invalid_range}.
	\item Errors because of the reference of an undeclared variable now show the name of the undeclared one \cite{pr_better_not_found_variable_show}.
\end{itemize}

Another aspect of missing information for error messages was the source location where an error was encountered.
The source location is the respective line and column number.
The source location in an error message as a feature were noted down in an still opened issue \cite{issue_enrich_error_message_information}.
The parser of ion shell does not keep track of line and columns numbers for statements.
Because of this, one can not simply incorporate the source location into the error messages.

A workaround was attempted via counting at least the line numbers per executed statement.
There is a for loop, see code snippet \ref{code:execution_for_code_snippet} at line \ref{code:execute_loop},
which terminates, parses and executes statements one by one.
This workaround could at least provide the line number of the source location.
That attempt however did not work for all scenarios.
In cases of calling a function in Ion Shell wrong line numbers occur however.
This oddity comes from the fact that statements within a function are executed in a batch.
Let us consider the following code snippet TODO add code snippet.
If an error occurs at line .. then the line number is 4 with the workaround because that is where the function was called.
In addition to that the execution of builin methods do propagate their error up to the execution loop \ref{code:execution_for_code_snippet}.
If an error happens a message is directly printed to the console via this section TODO.

In my view the solution is to rewrite the tokenisation and parsing in a way so that
a token/language items are linked to its respective column and line number.
This rewrite however requires coordination with the respository owners and significant amount of work
which exceeds the available time I could afford to spend for the it project.

\rustCode{execution_loop}{code:execution_for_code_snippet}{file_ref_execute_loop}{For loop which terminates,parses and interprets statements}

